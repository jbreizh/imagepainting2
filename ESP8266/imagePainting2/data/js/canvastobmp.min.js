var CanvasToBMP={toArrayBuffer:function(t){var r=t.width,e=t.height,n=3*r,a=t.getContext("2d").getImageData(0,0,r,e),o=new Uint32Array(a.data.buffer),f=4*Math.floor((24*r+31)/32),i=f*e,u=54+i,s=new ArrayBuffer(u),g=new DataView(s),h=0,U=0;b(19778),c(u),h+=4,c(54),c(40),c(r),c(e>>>0),b(1),b(24),c(0),c(i),c(11811),c(11811),h+=8;for(let t=0;t<e;t++){const r=54+(e-t-1)*f;for(let t=0;t<n;t+=3){const e=o[U++],n=e%256,a=(e>>>8)%256,f=(e>>>16)%256;g.setUint8(r+t,f),g.setUint8(r+t+1,a),g.setUint8(r+t+2,n)}}return s;function b(t){g.setUint16(h,t,!0),h+=2}function c(t){g.setUint32(h,t,!0),h+=4}},toBlob:function(t){return new Blob([this.toArrayBuffer(t)],{type:"image/bmp"})},toDataURL:function(t){for(var r=new Uint8Array(this.toArrayBuffer(t)),e="",n=0,a=r.length;n<a;)e+=String.fromCharCode(r[n++]);return"data:image/bmp;base64,"+btoa(e)}};
