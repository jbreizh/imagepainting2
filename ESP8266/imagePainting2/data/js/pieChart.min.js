function drawPieSlice(t,s,a,i,h,e,o,l){t.save(),t.fillStyle=o,t.strokeStyle=l,t.beginPath(),t.moveTo(s,a),t.arc(s,a,i,h,e,l),t.closePath(),t.fill(),t.restore()}class PieChart{constructor(t){this.options=t,this.canvas=t.canvas,this.ctx=this.canvas.getContext("2d"),this.colors=t.colors,this.totalValue=[...Object.values(this.options.data)].reduce(((t,s)=>t+s),0),this.radius=Math.min(this.canvas.width/2,this.canvas.height/2)}drawSlices(){var t=0,s=-Math.PI/2;for(var a in this.options.data){var i=this.options.data[a],h=2*Math.PI*i/this.totalValue;drawPieSlice(this.ctx,this.canvas.width/2,this.canvas.height/2,this.radius,s,s+h,this.colors[t%this.colors.length]),s+=h,t++}}drawLabels(){var t=-Math.PI/2;for(var s in this.options.data){var a=this.options.data[s],i=2*Math.PI*a/this.totalValue,h=this.canvas.width/2+this.radius/2*Math.cos(t+i/2),e=this.canvas.height/2+this.radius/2*Math.sin(t+i/2),o=Math.round(100*a/this.totalValue);this.ctx.save(),this.ctx.fillStyle="white",this.ctx.font="bold 20px Arial",this.ctx.textAlign="center",this.ctx.fillText(s+":"+o+"%",h,e),this.ctx.restore(),t+=i}}draw(){this.drawSlices(),this.drawLabels()}}
